<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <style>
            * {
                font-family: system-ui, -apple-system, BlinkMacSystemFont,
                    "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
                    "Helvetica Neue", sans-serif;
            }

            td {
                padding: 5px;
            }
        </style>
    </head>
    <body>
        <!-- <input id="token" type="text" />
        <button id="gen-token">Gen token</button>
        <button id="test">Test api</button>

        <p id="rs"></p>

        <table border="1">
            <thead id="t-head"></thead>

            <tbody id="t-body"></tbody>
        </table>

        <script>
            const $ = (selector) => document.querySelector(selector);
            const token = $("#token");

            const httpClient = {
                get: (url) => {
                    return fetch(url, {
                        headers: {
                            Authorization: `Bearer ${token.value}`,
                        },
                    }).then((res) => res.json());
                },
                post: (url, data) => {
                    return fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token.value}`,
                        },
                        body: JSON.stringify(data || {}),
                    }).then((res) => res.json());
                },
                put: (url, data) => {
                    return fetch(url, {
                        method: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token.value}`,
                        },
                        body: JSON.stringify(data || {}),
                    }).then((res) => res.json());
                },
                delete: (url, data) => {
                    return fetch(url, {
                        method: "DELETE",
                        headers: {
                            Authorization: `Bearer ${token.value}`,
                        },
                    }).then((res) => res.json());
                },
            };
        </script>

        <script>
            const btn = $("button");
            const test = $("#test");
            const rs = $("#rs");
            const tHead = $("#t-head");
            const tBody = $("#t-body");

            btn.addEventListener("click", async () => {
                const data = await httpClient.post("/token/generate");

                rs.innerText = data.accessToken;
            });

            test.addEventListener("click", async () => {
                const data = await httpClient.post("/api/test");

                console.log(data);
            });

            const main = async () => {
                const data = await httpClient.get("/api/kqxs");

                const arr = data.map((e) => {
                    return Object.values(e.ketqua)
                        .filter(Array.isArray)
                        .flat()
                        .map((e) => {
                            return e.slice(-2);
                        });
                });

                // tHead.querySelector("tr").innerHTML = ;

                console.log(arr);

                tBody.innerHTML = Array(100)
                    .fill(1)
                    .map((_, index) => {
                        const num = index < 10 ? "0" + index : "" + index;

                        return `
                        <tr>
                            <th>${num}</th>  
                            ${arr
                                .map((e) => {
                                    console.log();

                                    return `
                                        <th style="padding: 0 6px;">${
                                            e.includes(num)
                                                ? e.reduce((pre, cr) => {
                                                      if (cr === num) {
                                                          return pre + 1;
                                                      }

                                                      return pre;
                                                  }, 0)
                                                : ""
                                        }</th>
                                    `;
                                })
                                .join("")}
                        </tr>
                    `;
                    })
                    .join("");
            };

            main();
        </script> -->
    </body>
</html>
